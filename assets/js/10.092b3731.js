(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{187:function(t,v,_){"use strict";_.r(v);var a=_(6),r=Object(a.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"功能模块-后端"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#功能模块-后端"}},[t._v("#")]),t._v(" 功能模块--后端")]),t._v(" "),_("p",[t._v("后端使用Python社区成熟的Web框架Django，除了强大的后台系统外，还提供了一套完善API。")]),t._v(" "),_("h2",{attrs:{id:"数据库"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),_("p",[t._v("本系统将元器件信息存储在数据库中，管理系统下主要有"),_("code",[t._v("Type")]),t._v("、"),_("code",[t._v("Attr")]),t._v("、"),_("code",[t._v("Component")]),t._v("、"),_("code",[t._v("Record")]),t._v("四张表，主要业务就是对这四个表进行增删改查。")]),t._v(" "),_("p",[t._v("这是"),_("strong",[t._v("最为重要")]),t._v("的部分")]),t._v(" "),_("h3",{attrs:{id:"存储结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#存储结构"}},[t._v("#")]),t._v(" 存储结构")]),t._v(" "),_("p",[t._v("围绕"),_("code",[t._v("Component")]),t._v("，"),_("code",[t._v("Record")]),t._v("与"),_("code",[t._v("Component")]),t._v("，负责出入库记录，"),_("code",[t._v("Type")]),t._v("和"),_("code",[t._v("Attr")]),t._v("则与"),_("code",[t._v("Component")]),t._v("是一对多的关系，辅助"),_("code",[t._v("Component")]),t._v("的筛选。")]),t._v(" "),_("p",[t._v("主要关注的是交易（在库）金额和交易（在库）数量。")]),t._v(" "),_("p",[_("strong",[t._v("元器件Component")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("说明")]),t._v(" "),_("th",[t._v("限制")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("编号")]),t._v(" "),_("td",[t._v("唯一，自增，无需指定")])]),t._v(" "),_("tr",[_("td",[t._v("name")]),t._v(" "),_("td",[t._v("组件名称")]),t._v(" "),_("td",[t._v("唯一，不超过128个字符")])]),t._v(" "),_("tr",[_("td",[t._v("types")]),t._v(" "),_("td",[t._v("类型，可关联多个")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("attrs")]),t._v(" "),_("td",[t._v("属性，可关联多个")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("num")]),t._v(" "),_("td",[t._v("在库数量")]),t._v(" "),_("td",[t._v("由Record自动更新，无需手动修改")])]),t._v(" "),_("tr",[_("td",[t._v("money")]),t._v(" "),_("td",[t._v("在库价值金额")]),t._v(" "),_("td",[t._v("由Record自动更新，无需手动修改")])]),t._v(" "),_("tr",[_("td",[t._v("min_num")]),t._v(" "),_("td",[t._v("库存警告线")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("strong",[t._v("类型Type和属性Attr")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("说明")]),t._v(" "),_("th",[t._v("限制")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("编号")]),t._v(" "),_("td",[t._v("唯一，自增，无需指定")])]),t._v(" "),_("tr",[_("td",[t._v("name")]),t._v(" "),_("td",[t._v("名称")]),t._v(" "),_("td",[t._v("唯一，不超过64个字符")])])])]),t._v(" "),_("p",[_("strong",[t._v("记录Record")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("说明")]),t._v(" "),_("th",[t._v("限制")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("编号")]),t._v(" "),_("td",[t._v("唯一，自增，无需指定")])]),t._v(" "),_("tr",[_("td",[t._v("operation")]),t._v(" "),_("td",[t._v("操作，入库（1）或出库（-1）")]),t._v(" "),_("td",[t._v("整数，-1或1")])]),t._v(" "),_("tr",[_("td",[t._v("component")]),t._v(" "),_("td",[t._v("关联组件")]),t._v(" "),_("td",[t._v("只能关联一个")])]),t._v(" "),_("tr",[_("td",[t._v("num")]),t._v(" "),_("td",[t._v("交易数量")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("money")]),t._v(" "),_("td",[t._v("价值金额")]),t._v(" "),_("td",[t._v("正数")])]),t._v(" "),_("tr",[_("td",[t._v("time")]),t._v(" "),_("td",[t._v("交易时间")]),t._v(" "),_("td",[t._v("至少精确到秒")])])])]),t._v(" "),_("h3",{attrs:{id:"兼容主流数据库"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#兼容主流数据库"}},[t._v("#")]),t._v(" 兼容主流数据库")]),t._v(" "),_("p",[t._v("得益于Django框架强大的ORM模块，可以很好的切换不同的数据库，小至Sqlite3，大至MySQL，PostgreSQL，可根据自己的需求选择适合生产要求的数据库。")]),t._v(" "),_("h2",{attrs:{id:"统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#统计"}},[t._v("#")]),t._v(" 统计")]),t._v(" "),_("h3",{attrs:{id:"交易记录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#交易记录"}},[t._v("#")]),t._v(" 交易记录")]),t._v(" "),_("p",[t._v("基于存储在数据库的"),_("code",[t._v("Record")]),t._v("，可查询每年/月/天的出入库的聚合（汇总）情况，同时还可以选定。")]),t._v(" "),_("h3",{attrs:{id:"组件信息"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#组件信息"}},[t._v("#")]),t._v(" 组件信息")]),t._v(" "),_("p",[t._v("正确添加的记录（而不是绕过系统去修改数据库）可以增减到组件信息上，查询每个组件的在库信息是十分容易的事情。")]),t._v(" "),_("p",[t._v("后端可以在"),_("code",[t._v("/Admin/main/")]),t._v("中看到。")]),t._v(" "),_("h2",{attrs:{id:"admin"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#admin"}},[t._v("#")]),t._v(" Admin")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("/admin/\n")])])]),_("p",[t._v("Django自带了功能强大的后台系统，这里超级管理可进行全局管理，而无需运行Python命令或直接操作数据库。")]),t._v(" "),_("p",[t._v("这一后台系统也可以完成许多基础查询需求。")]),t._v(" "),_("h2",{attrs:{id:"restful-api"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#restful-api"}},[t._v("#")]),t._v(" RESTful API")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("/api/\n")])])]),_("p",[t._v("后端系统基于"),_("code",[t._v("Django REST Framework")]),t._v("提供了RESTful API，便用使用者二次开发，也就是说交互部分、显示部分，完全可以不使用自带前端，而自己进行开发，二次开发者可以基于API开发PC应用或移动软件。")]),t._v(" "),_("h2",{attrs:{id:"用户系统"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户系统"}},[t._v("#")]),t._v(" 用户系统")]),t._v(" "),_("p",[t._v("提供了较为完善的用户系统，包括用户分级、分组，权限系统，邮箱验证，第三方登录，基于"),_("code",[t._v("JWT")]),t._v("认证，便于前后端分离的开发。")]),t._v(" "),_("h3",{attrs:{id:"权限机制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#权限机制"}},[t._v("#")]),t._v(" 权限机制")]),t._v(" "),_("p",[t._v("完善的权限机制，系统默认采取了严格的权限策略：无论读写都需要管理员权限，也因此后端接口不便在浏览器直接访问测试。")]),t._v(" "),_("h3",{attrs:{id:"第三方登录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第三方登录"}},[t._v("#")]),t._v(" 第三方登录")]),t._v(" "),_("p",[t._v("默认提供了Github的第三方登录，OAuth2.0的授权流程十分相似，可参考Github流程接入国内微信、新浪微博等主流平台，在默认的前端系统中没有使用第三方登录")]),t._v(" "),_("h3",{attrs:{id:"邮箱认证"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#邮箱认证"}},[t._v("#")]),t._v(" 邮箱认证")]),t._v(" "),_("p",[t._v("提供了邮箱认证功能，默认不开启，需要提供邮箱服务器，并开启Celery、Redis服务（防止阻塞，提升体验）。")]),t._v(" "),_("h2",{attrs:{id:"文档"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[t._v("#")]),t._v(" 文档")]),t._v(" "),_("p",[t._v("尝试提供完善的文档，本文档基于"),_("code",[t._v("VuePress")]),t._v("构建，简介美观。")])])}),[],!1,null,null,null);v.default=r.exports}}]);